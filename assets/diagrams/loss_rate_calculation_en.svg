<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="600" fill="#f8f9fa" rx="10" ry="10" />
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial, sans-serif" font-size="22" text-anchor="middle" fill="#333" font-weight="bold">Line Loss Rate Calculation Process</text>
  
  <!-- Main Flowchart -->
  <g transform="translate(50, 80)">
    <!-- Data Sources -->
    <rect x="0" y="0" width="700" height="70" rx="5" ry="5" fill="#eef" stroke="#aad" stroke-width="1" />
    <text x="350" y="25" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">Data Sources</text>
    
    <rect x="20" y="35" width="130" height="25" rx="3" ry="3" fill="#f0f0ff" stroke="#aad" />
    <text x="85" y="52" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Transformer Meter Data</text>
    
    <rect x="170" y="35" width="130" height="25" rx="3" ry="3" fill="#f0f0ff" stroke="#aad" />
    <text x="235" y="52" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Customer Meter Data</text>
    
    <rect x="320" y="35" width="130" height="25" rx="3" ry="3" fill="#f0f0ff" stroke="#aad" />
    <text x="385" y="52" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Weather Data</text>
    
    <rect x="470" y="35" width="130" height="25" rx="3" ry="3" fill="#f0f0ff" stroke="#aad" />
    <text x="535" y="52" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Grid Topology Data</text>
    
    <!-- Data Preprocessing -->
    <rect x="0" y="90" width="700" height="70" rx="5" ry="5" fill="#efe" stroke="#ada" stroke-width="1" />
    <text x="350" y="115" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">Data Preprocessing</text>
    
    <rect x="20" y="125" width="150" height="25" rx="3" ry="3" fill="#f0fff0" stroke="#ada" />
    <text x="95" y="142" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Data Cleaning & Outliers</text>
    
    <rect x="190" y="125" width="150" height="25" rx="3" ry="3" fill="#f0fff0" stroke="#ada" />
    <text x="265" y="142" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Missing Value Imputation</text>
    
    <rect x="360" y="125" width="150" height="25" rx="3" ry="3" fill="#f0fff0" stroke="#ada" />
    <text x="435" y="142" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Time Series Alignment</text>
    
    <rect x="530" y="125" width="150" height="25" rx="3" ry="3" fill="#f0fff0" stroke="#ada" />
    <text x="605" y="142" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Standardization</text>
    
    <!-- Loss Calculations -->
    <g>
      <!-- Theoretical Loss Calculation -->
      <rect x="0" y="180" width="220" height="260" rx="5" ry="5" fill="#fee" stroke="#daa" stroke-width="1" />
      <text x="110" y="205" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">Theoretical Loss Calculation</text>
      
      <rect x="20" y="220" width="180" height="30" rx="3" ry="3" fill="#fff0f0" stroke="#daa" />
      <text x="110" y="240" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Method Selection</text>
      
      <!-- Arrow -->
      <line x1="110" y1="250" x2="110" y2="265" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)" />
      
      <rect x="20" y="265" width="180" height="30" rx="3" ry="3" fill="#fff0f0" stroke="#daa" />
      <text x="110" y="277" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Method 1 (Priority):</text>
      <text x="110" y="290" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Technical Loss Method</text>
      
      <!-- Arrow -->
      <line x1="110" y1="295" x2="110" y2="310" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)" />
      
      <rect x="20" y="310" width="180" height="30" rx="3" ry="3" fill="#fff0f0" stroke="#daa" />
      <text x="110" y="322" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Method 2:</text>
      <text x="110" y="335" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Voltage Drop Method</text>
      
      <!-- Arrow -->
      <line x1="110" y1="340" x2="110" y2="355" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)" />
      
      <rect x="20" y="355" width="180" height="30" rx="3" ry="3" fill="#fff0f0" stroke="#daa" />
      <text x="110" y="367" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Method 3:</text>
      <text x="110" y="380" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Regression Method</text>
      
      <!-- Arrow -->
      <line x1="110" y1="385" x2="110" y2="400" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)" />
      
      <rect x="20" y="400" width="180" height="30" rx="3" ry="3" fill="#fff0f0" stroke="#daa" />
      <text x="110" y="412" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Method 4:</text>
      <text x="110" y="425" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Assignment Method</text>
      
      <!-- Formula Box -->
      <rect x="5" y="440" width="210" height="25" rx="3" ry="3" fill="none" stroke="#999" stroke-dasharray="3,3" />
      <text x="110" y="457" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666">Theoretical Loss Rate = Loss / Power Supply</text>
    </g>
    
    <!-- Absolute Loss Calculation -->
    <g>
      <rect x="240" y="180" width="220" height="260" rx="5" ry="5" fill="#eef" stroke="#aad" stroke-width="1" />
      <text x="350" y="205" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">Absolute Loss Calculation</text>
      
      <rect x="260" y="220" width="180" height="30" rx="3" ry="3" fill="#f0f0ff" stroke="#aad" />
      <text x="350" y="240" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Power Supply Data Collection</text>
      
      <!-- Arrow -->
      <line x1="350" y1="250" x2="350" y2="265" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)" />
      
      <rect x="260" y="265" width="180" height="30" rx="3" ry="3" fill="#f0f0ff" stroke="#aad" />
      <text x="350" y="285" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Power Sales Data Collection</text>
      
      <!-- Arrow -->
      <line x1="350" y1="295" x2="350" y2="310" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)" />
      
      <rect x="260" y="310" width="180" height="30" rx="3" ry="3" fill="#f0f0ff" stroke="#aad" />
      <text x="350" y="330" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Data Validation & Correction</text>
      
      <!-- Arrow -->
      <line x1="350" y1="340" x2="350" y2="355" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)" />
      
      <rect x="260" y="355" width="180" height="30" rx="3" ry="3" fill="#f0f0ff" stroke="#aad" />
      <text x="350" y="375" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Absolute Loss Calculation</text>
      
      <!-- Arrow -->
      <line x1="350" y1="385" x2="350" y2="400" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)" />
      
      <rect x="260" y="400" width="180" height="30" rx="3" ry="3" fill="#f0f0ff" stroke="#aad" />
      <text x="350" y="420" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Absolute Loss Rate</text>
      
      <!-- Formula Box -->
      <rect x="245" y="440" width="210" height="25" rx="3" ry="3" fill="none" stroke="#999" stroke-dasharray="3,3" />
      <text x="350" y="457" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666">Absolute Loss Rate = (Supply-Sales) / Supply</text>
    </g>
    
    <!-- Relative Loss Calculation -->
    <g>
      <rect x="480" y="180" width="220" height="260" rx="5" ry="5" fill="#efe" stroke="#ada" stroke-width="1" />
      <text x="590" y="205" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">Relative Loss Calculation</text>
      
      <rect x="500" y="220" width="180" height="30" rx="3" ry="3" fill="#f0fff0" stroke="#ada" />
      <text x="590" y="240" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Acquire Absolute Loss Rate</text>
      
      <!-- Arrow -->
      <line x1="590" y1="250" x2="590" y2="265" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)" />
      
      <rect x="500" y="265" width="180" height="30" rx="3" ry="3" fill="#f0fff0" stroke="#ada" />
      <text x="590" y="285" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Historical Data Collection</text>
      
      <!-- Arrow -->
      <line x1="590" y1="295" x2="590" y2="310" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)" />
      
      <rect x="500" y="310" width="180" height="30" rx="3" ry="3" fill="#f0fff0" stroke="#ada" />
      <text x="590" y="330" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Load Pattern Analysis</text>
      
      <!-- Arrow -->
      <line x1="590" y1="340" x2="590" y2="355" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)" />
      
      <rect x="500" y="355" width="180" height="30" rx="3" ry="3" fill="#f0fff0" stroke="#ada" />
      <text x="590" y="375" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Baseline Loss Rate Calculation</text>
      
      <!-- Arrow -->
      <line x1="590" y1="385" x2="590" y2="400" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)" />
      
      <rect x="500" y="400" width="180" height="30" rx="3" ry="3" fill="#f0fff0" stroke="#ada" />
      <text x="590" y="420" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Relative Loss Rate</text>
      
      <!-- Formula Box -->
      <rect x="485" y="440" width="210" height="25" rx="3" ry="3" fill="none" stroke="#999" stroke-dasharray="3,3" />
      <text x="590" y="457" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666">Relative Loss Rate = Absolute Rate - Baseline</text>
    </g>
    
    <!-- Result Applications -->
    <rect x="0" y="460" width="700" height="70" rx="5" ry="5" fill="#fef" stroke="#dad" stroke-width="1" />
    <text x="350" y="485" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">Loss Analysis Applications</text>
    
    <rect x="20" y="495" width="150" height="25" rx="3" ry="3" fill="#fff0ff" stroke="#dad" />
    <text x="95" y="512" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Anomaly Detection</text>
    
    <rect x="190" y="495" width="150" height="25" rx="3" ry="3" fill="#fff0ff" stroke="#dad" />
    <text x="265" y="512" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Classification Diagnosis</text>
    
    <rect x="360" y="495" width="150" height="25" rx="3" ry="3" fill="#fff0ff" stroke="#dad" />
    <text x="435" y="512" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Treatment Recommendations</text>
    
    <rect x="530" y="495" width="150" height="25" rx="3" ry="3" fill="#fff0ff" stroke="#dad" />
    <text x="605" y="512" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#333">Loss Rate Prediction</text>
  </g>
  
  <!-- Arrow Definition -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#666" />
    </marker>
  </defs>
</svg> 